---
title: JVM
date: 2022-03-16 +/-TTTT
categories: [设计模式, Java实现]
tags: []     # TAG names should always be lowercase
---

# 单例模式
1.设计单例的一般步骤：

- 私有化生产单例的手段，不允许外部访问
- 为内部生产的单例准备静态变量
- 向外暴露获取单例的唯一手段

2.单例的不同实现

- 饿汉模式（常用）
```java
/**
 * 单例模式-饿汉
 */
public class Sun {

  private static final Sun sun = new Sun();

  private Sun(){}

  public static Sun getInstance(){
    return sun;
  }
}
```
- 懒汉模式（复杂，性能不高）
```java
/**
 * 单例模式-懒汉
 */
public class Sun {

  private volatile static Sun sun;

  private Sun(){}

  public static Sun getInstance(){
    // 最外层判空逻辑提高加锁后的性能，加了它在sun被赋值后，之后的就不会执行里面的同步加锁操作，也就不会排队了
    if (sun == null){
      synchronized (Sun.class){
        if (sun == null){
          sun = new Sun();
        }
      }
    }
    return sun;
  }
}
```
